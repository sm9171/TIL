<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>2022년 10월 | 나상민의 TIL</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="생각 정리">
    
    <link rel="preload" href="/TIL/assets/css/0.styles.dd5ac3b9.css" as="style"><link rel="preload" href="/TIL/assets/js/app.552d5468.js" as="script"><link rel="preload" href="/TIL/assets/js/2.99089f8b.js" as="script"><link rel="preload" href="/TIL/assets/js/8.c8b96b86.js" as="script"><link rel="prefetch" href="/TIL/assets/js/10.99cc811c.js"><link rel="prefetch" href="/TIL/assets/js/11.ff56b2bb.js"><link rel="prefetch" href="/TIL/assets/js/12.6f8f06d4.js"><link rel="prefetch" href="/TIL/assets/js/13.86903d7a.js"><link rel="prefetch" href="/TIL/assets/js/14.6a285c2c.js"><link rel="prefetch" href="/TIL/assets/js/15.c782545e.js"><link rel="prefetch" href="/TIL/assets/js/16.26e618aa.js"><link rel="prefetch" href="/TIL/assets/js/17.c38a942d.js"><link rel="prefetch" href="/TIL/assets/js/18.bd0636bf.js"><link rel="prefetch" href="/TIL/assets/js/19.77d987ed.js"><link rel="prefetch" href="/TIL/assets/js/20.59fd4a95.js"><link rel="prefetch" href="/TIL/assets/js/21.af269ebb.js"><link rel="prefetch" href="/TIL/assets/js/22.8b910137.js"><link rel="prefetch" href="/TIL/assets/js/23.52af7a9c.js"><link rel="prefetch" href="/TIL/assets/js/3.6d70358d.js"><link rel="prefetch" href="/TIL/assets/js/4.449a2c8e.js"><link rel="prefetch" href="/TIL/assets/js/5.7329d13e.js"><link rel="prefetch" href="/TIL/assets/js/6.a667c83e.js"><link rel="prefetch" href="/TIL/assets/js/7.5fcb7a80.js"><link rel="prefetch" href="/TIL/assets/js/9.5790487b.js">
    <link rel="stylesheet" href="/TIL/assets/css/0.styles.dd5ac3b9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/TIL/" class="home-link router-link-active"><img src="https://avatars1.githubusercontent.com/u/18749057?s=460&amp;v=4" alt="나상민의 TIL" class="logo"> <span class="site-name can-hide">나상민의 TIL</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/TIL/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="https://github.com/sm9171/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://naccoon.tistory.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/TIL/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="https://github.com/sm9171/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://naccoon.tistory.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Monthly I Learned</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/TIL/MIL/2022.08.html" class="sidebar-link">2022년 8월</a></li><li><a href="/TIL/MIL/2022.09.html" class="sidebar-link">2022년 9월</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Books</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Principle</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_2022년-10월"><a href="#_2022년-10월" class="header-anchor">#</a> 2022년 10월</h1> <h2 id="_10월-8일-cqrs-패턴-변경-감지-방법"><a href="#_10월-8일-cqrs-패턴-변경-감지-방법" class="header-anchor">#</a> 10월 8일 - CQRS 패턴 ,변경 감지 방법</h2> <h3 id="command-and-query-responsibility-segregation"><a href="#command-and-query-responsibility-segregation" class="header-anchor">#</a> Command and Query Responsibility Segregation</h3> <ul><li>명령과 조회의 책임을 분리한다.</li></ul> <h3 id="cqrs가-필요한-시점"><a href="#cqrs가-필요한-시점" class="header-anchor">#</a> CQRS가 필요한 시점</h3> <ul><li>UX와 비지니스 요구 사항이 복잡해질 때</li> <li>조회 성능을 보다 높이고 싶을 때</li> <li>데이터를 관리하는 영역과 이를 뷰로 전달하는 영역의 책임이 나뉘어져야 할 때</li> <li>시스템 확장성을 높이고 싶을 때</li></ul> <h3 id="변경-감지-방법-내려갈수록-추상화레벨이-낮아짐"><a href="#변경-감지-방법-내려갈수록-추상화레벨이-낮아짐" class="header-anchor">#</a> 변경 감지 방법 (내려갈수록 추상화레벨이 낮아짐.)</h3> <ol><li>JPA EntityListensers
<ol><li>@Entity 혹은 @MappedSuperclass 객체 메소드에 어노테이션 지정으로 사용 가능</li> <li>7개의 Callback 지정 함수 선언 가능 - Entity 생명주기에서 어느시점에서든 Callback 받을수 있음</li> <li>해당 엔티티만 인자로 반환되기 때문에 구체적인 추적 불가</li></ol></li> <li>Hibernate EventListener
<ol><li>SessionFacoryImpl -&gt; SessionFactoryServiceRegistry -&gt; EventListenerRegistry</li> <li>26가지 디테일한 상황에 콜백</li> <li>받고자 하는 상황에 따른 인터페이스를 구현한 클래스 등록</li> <li>보다 상세한 정보 전달 (변경된 프로퍼티, 이전 상태, 현재 상태 등)</li> <li>모든 엔티티 변경 사항이 전달 됨</li></ol></li> <li>Hibernate Interceptor
<ol><li>Session 혹은 SessionFactory에 Interceptor 등록 가능</li> <li>EventListener에 비해 적은 콜백 종류</li> <li>저장될 데이터 조작 가능</li></ol></li> <li>Spring AOP
<ol><li>Method에만 설정 가능</li> <li>Method 실행 전/후, 반환 후, 예외 상황, 어노테이션 붙은 경우 등</li> <li>Pointcut 문법으로 동작</li> <li>특정 케이스에만 적용 하자</li></ol></li></ol> <h2 id="_10월-9일-connecttimeout과-sockettimeout"><a href="#_10월-9일-connecttimeout과-sockettimeout" class="header-anchor">#</a> 10월 9일 - connectTimeout과 socketTimeout</h2> <ul><li>Socket Connect 시 타임아웃(connectTimeout): Socket.connect(SocketAddress endpoint, int timeout) 메서드를 위한 제한 시간</li> <li>Socket Read/Write의 타임아웃(socketTimeout): Socket.setSoTimeout(int timeout) 메서드를 위한 제한 시간</li></ul> <h2 id="_10월-14일-ioc-di-dip-개념-잡기"><a href="#_10월-14일-ioc-di-dip-개념-잡기" class="header-anchor">#</a> 10월 14일 - IoC, DI, DIP 개념 잡기</h2> <h3 id="inversion-of-control-ioc-제어의-역전"><a href="#inversion-of-control-ioc-제어의-역전" class="header-anchor">#</a> Inversion of Control (IoC, 제어의 역전)</h3> <p>코드의 흐름을 제어하는 주체가 바뀌는 것.</p> <h3 id="dependency-inversion-principle-dip-의존관계-역전-법칙"><a href="#dependency-inversion-principle-dip-의존관계-역전-법칙" class="header-anchor">#</a> Dependency Inversion principle (DIP, 의존관계 역전 법칙)</h3> <p>구체 클래스가 아닌 추상화를 의존하게 하여 변경에 유연하게 하자.</p> <h3 id="dependency-injection-di-의존성-주입"><a href="#dependency-injection-di-의존성-주입" class="header-anchor">#</a> Dependency Injection (DI, 의존성 주입)</h3> <p>필요로 하는 오브젝트를 스스로 생성하는 것이 아닌 외부로 부터 주입받는 기법(생성주입, 세터주입, 필드 주입)</p> <h2 id="_10월-22일-spring-batch-tasklet방식과-chunk방식의-차이점"><a href="#_10월-22일-spring-batch-tasklet방식과-chunk방식의-차이점" class="header-anchor">#</a> 10월 22일 - Spring batch Tasklet방식과 Chunk방식의 차이점</h2> <ul><li>step에서 tasklet 방식으로 구성하는 방법과 ItemReader/ItemProcessor/ItemWriter 단위로 청크 지향 프로세싱을 구성하는 방법이 있다.</li></ul> <h3 id="tasklet-방식"><a href="#tasklet-방식" class="header-anchor">#</a> Tasklet 방식</h3> <ul><li>단계 내에서 단일 태스크를 수행하기 위한 것으로 임의의 Step을 실행할 때 읽기/처리/쓰기를 하나의 작업으로 처리하는 방식</li> <li>배치 처리 과정이 비교적 쉬운 경우 쉽게 사용</li> <li>대량 처리를 하는 경우 더 복잡</li> <li>하나의 큰 덩어리를 여러 덩어리로 나누어 처리하기 부적합</li></ul> <h3 id="chunk-방식"><a href="#chunk-방식" class="header-anchor">#</a> Chunk 방식</h3> <ul><li>트랜잭션 경계 내에서 청크 단위(아이템이 트랜잭션에서 커밋되는 수)로 데이터를 읽고 생성하는 기법</li> <li>ItemReader, ItemProcessor, ItemWriter의 관계 이해 필요</li> <li>대량 처리를 하는 경우 Tasklet 보다 비교적 쉽게 구현</li> <li>예를 들면 10,000개의 데이터 중 1,000개씩 10개의 덩어리로 수행</li></ul> <h2 id="_10월-23일-스프링프레임워크와-스프링부트의-차이점"><a href="#_10월-23일-스프링프레임워크와-스프링부트의-차이점" class="header-anchor">#</a> 10월 23일 - 스프링프레임워크와 스프링부트의 차이점</h2> <h3 id="spring-boot-starter"><a href="#spring-boot-starter" class="header-anchor">#</a> Spring Boot Starter</h3> <ul><li>기존에는 스프링을 사용할 때 버전까지 명시하고 버전에 맞는 설정을 하였지만, 스프링 부트는 버전 관리를 스프링 부트에 의해서 관리됩니다. 따라서 아래처럼 spring-boot-starter-web을 사용하면 종속된 모든 라이브러리를 알맞게 찾아서 함께 가져오기 때문에 종속성이나 호환 버전에 대해 신경 쓸 필요가 없게 됨.</li></ul> <h3 id="embed-tomcat"><a href="#embed-tomcat" class="header-anchor">#</a> Embed Tomcat</h3> <ul><li>스프링 부트는 내장형 톰캣을 가지고 있기 때문에 별도의 톰캣을 설정할 필요가 없어졌으며, 그렇기 때문에 독립적으로 실행 가능한 jar로 손쉽게 배포가 가능</li></ul> <h3 id="autoconfigurator"><a href="#autoconfigurator" class="header-anchor">#</a> AutoConfigurator</h3> <ul><li>공통적으로 필요한 DispatcherServlet같은 설정을 어노테이션을 이용하여 대신할 수 있도록 해준다.</li> <li>스프링 부트의 main 메서드는 @SpringBootApplication 어노테이션을 가지고 있는데 이것은 ComponentScan + configuraion + EnableAutoConfiguration를 합친 어노테이션 이라볼 수 있다.</li></ul> <h2 id="_10월-31일-filter-interceptor-aop의-차이점"><a href="#_10월-31일-filter-interceptor-aop의-차이점" class="header-anchor">#</a> 10월 31일 - filter, interceptor, AOP의 차이점</h2> <p>자바 웹 개발을 하다보면 공통 관심사를 분리해야될 시점이 생기는데 이때 보통 filter,interceptor,AOP를 사용한다. 이 세가지의 차이점을 알아보자.</p> <h3 id="filter-interceptor-aop의-흐름"><a href="#filter-interceptor-aop의-흐름" class="header-anchor">#</a> Filter, Interceptor, AOP의 흐름</h3> <p>Filter → Interceptor → AOP → Interceptor → Filter</p> <ol><li>서버를 실행시켜 서블릿이 올라오는 동안에 init이 실행되고, 그 후 doFilter가 실행된다.</li> <li>컨트롤러에 들어가기 전 preHandler가 실행된다</li> <li>컨트롤러에서 나와 postHandler, after Completion, doFilter 순으로 진행이 된다.</li> <li>서블릿 종료 시 destroy가 실행된다.</li></ol> <p><img src="/TIL/assets/img/process.6a759d3d.png" alt="process.png"></p> <h3 id="필터-filter-란"><a href="#필터-filter-란" class="header-anchor">#</a> 필터(Filter)란?</h3> <ul><li>말그대로 요청과 응답을 거른뒤 정제하는 역할을 한다.</li> <li>서블릿 필터는 DispatcherServlet 이전에 실행이 되는데 필터가 동작하도록 지정된 자원의 앞단에서 요청내용을 변경하거나, 여러가지 체크를 수행할 수 있다.</li> <li>또한 자원의 처리가 끝난 후 응답내용에 대해서도 변경하는 처리를 할 수가 있다.</li> <li>보통 web.xml에 등록하고, 일반적으로 인코딩 변환 처리, XSS방어 등의 요청에 대한 처리로 사용된다.</li> <li>springsecurity에서 filter를 이용하여 인증 인가 부분을 쉽게 구축한다.</li></ul> <h3 id="필터-filter-의-용도-및-예시"><a href="#필터-filter-의-용도-및-예시" class="header-anchor">#</a> 필터(Filter)의 용도 및 예시</h3> <ul><li>공통된 보안 및 인증/인가 관련 작업</li> <li>모든 요청에 대한 로깅 또는 감사</li> <li>이미지/데이터 압축 및 문자열 인코딩</li> <li>Spring과 분리되어야 하는 기능</li></ul> <h3 id="interceptor"><a href="#interceptor" class="header-anchor">#</a> Interceptor</h3> <ul><li>요청에 대한 작업 전/후로 가로챈다고 보면 된다.</li> <li>필터는 스프링 컨텍스트 외부에 존재하여 스프링과 무관한 자원에 대해 동작한다.</li> <li>하지만 인터셉터는 스프링의 DistpatcherServlet이 컨트롤러를 호출하기 전, 후로 끼어들기 때문에 스프링 컨텍스트(Context, 영역) 내부에서 Controller(Handler)에 관한 요청과 응답에 대해 처리한다.</li> <li>스프링의 모든 빈 객체에 접근할 수 있다.</li> <li>인터셉터는 여러 개를 사용할 수 있고 로그인 체크, 권한체크, 프로그램 실행시간 계산작업 로그확인 등의 업무처리</li></ul> <h3 id="인터셉터-interceptor-의-용도-및-예시"><a href="#인터셉터-interceptor-의-용도-및-예시" class="header-anchor">#</a> 인터셉터(Interceptor)의 용도 및 예시</h3> <ul><li>세부적인 보안 및 인증/인가 공통 작업</li> <li>API 호출에 대한 로깅 또는 감사</li> <li>Controller로 넘겨주는 정보(데이터)의 가공</li></ul> <h3 id="aop"><a href="#aop" class="header-anchor">#</a> AOP</h3> <ul><li>OOP를 보완하기 위해 나온 개념</li> <li>객체 지향의 프로그래밍을 했을 때 중복을 줄일 수 없는 부분을 줄이기 위해 종단면(관점)에서 바라보고 처리한다.</li> <li>주로 '로깅', '트랜잭션', '에러 처리'등 비즈니스단의 메서드에서 조금 더 세밀하게 조정하고 싶을 때 사용합니다.</li> <li>Interceptor나 Filter와는 달리 메소드 전후의 지점에 자유롭게 설정이 가능하다.</li> <li>Interceptor와 Filter는 주소로 대상을 구분해서 걸러내야하는 반면, AOP는 주소, 파라미터, 애노테이션 등 다양한 방법으로 대상을 지정할 수 있다.</li> <li>AOP의 Advice와 HandlerInterceptor의 가장 큰 차이는 파라미터의 차이다.</li> <li>Advice의 경우 JoinPoint나 ProceedingJoinPoint 등을 활용해서 호출한다.</li> <li>반면 HandlerInterceptor는 Filter와 유사하게 HttpServletRequest, HttpServletResponse를 파라미터로 사용한다.</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/TIL/assets/js/app.552d5468.js" defer></script><script src="/TIL/assets/js/2.99089f8b.js" defer></script><script src="/TIL/assets/js/8.c8b96b86.js" defer></script>
  </body>
</html>
